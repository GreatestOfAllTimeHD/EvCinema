<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
						

<mapper namespace="reservation_mapper">

<insert id="insert_reservation" parameterType="ReservationDto">
		insert into evcn_ecsreservation
		(siteId, id) values ( #{siteId}, #{id} )
	</insert>

<!-- 	<insert id="insert_reservation" parameterType="ReservationDto">
		insert into t_reservation
		values ( #{siteNumber}, #{customerNumber} )
	</insert> -->
	
	<select id="select_reservation_list" resultType="ReservationDto">
		select  siteId, id 
				from evcn_ecsreservation
	</select>
	
	<select id="select_reservation_list_by_siteNumber" resultType="ReservationDto"
													   parameterType="ReservationDto">
		select  siteId, id 
				from evcn_ecsreservation
				where siteId=#{siteId}
	</select>

	<select id="select_reservation_list_by_searchKeyword" resultType="ReservationDto"
													   parameterType="String">
		select  siteId, id 
				from evcn_ecsreservation
				where siteId like '%'||#{value}||'%'
	</select>
	
	<select id="select_reservation_list_by_searchKeyword_map" resultType="ReservationDto"
													   parameterType="hashMap">
		select  siteId, id 
				from evcn_ecsreservation
<!-- 				<choose> -->
<!-- 					<when test="searchOption == 'customerNumber'"> -->
<!-- 						where customer_number like '%'||#{searchKeyword}||'%' -->
<!-- 					</when> -->
						
<!-- 					<when test="searchOption == 'roomNumber'"> -->
<!-- 						where room_number like '%'||#{searchKeyword}||'%' -->
<!-- 					</when> -->
<!-- 					<otherwise> -->
						
<!-- 					</otherwise> -->
<!-- 				</choose> -->
				<if test="searchOption == 'customerNumber'">
					where siteId like '%'||#{searchKeyword}||'%'
				</if>
				<if test="searchOption == 'roomNumber'">
					where id like '%'||#{searchKeyword}||'%'
				</if>
	</select>
	
	<select id="select_reservation_list_by_searchKeyword_map2" resultType="ReservationDto"
													   parameterType="hashMap">
		select  siteId, id 
				from evcn_ecsreservation
				where 1=1 				
				<if test="searchOption == 'customerNumber'">
					and siteId like '%'||#{searchKeyword}||'%'
				</if>
				<if test="searchOption == 'roomNumber'">
					and id like '%'||#{searchKeyword}||'%'
				</if>
				<if test="hotelDiv1 != null and hotelDiv1 != '' and hotelDiv1 == '1'">
					and siteId like '1%'
				</if>
				<if test="hotelDiv2 != null and hotelDiv2 != '' and hotelDiv2 == '2'">
					and id not like '1%'
				</if>
<!-- 			<where>  -->
<!-- 				<if test="searchOption == 'customerNumber'"> -->
<!-- 					and customer_number like '%'||#{searchKeyword}||'%' -->
<!-- 				</if> -->
<!-- 				<if test="searchOption == 'roomNumber'"> -->
<!-- 					and room_number like '%'||#{searchKeyword}||'%' -->
<!-- 				</if> -->
<!-- 				<if test="hotelDiv1 != null and hotelDiv1 != '' and hotelDiv1 == '1'"> -->
<!-- 					and room_number like '1%' -->
<!-- 				</if> -->
<!-- 				<if test="hotelDiv2 != null and hotelDiv2 != '' and hotelDiv2 == '2'"> -->
<!-- 					and room_number not like '1%' -->
<!-- 				</if> -->
<!-- 			</where> -->
	</select>

</mapper>















